<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuro - Collaboration</title>
    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/layout.css">
    <link rel="stylesheet" href="/static/css/components.css">
</head>
<body>
    <!-- Setup Panel -->
    <div id="setup-panel" class="modal-overlay">
        <div class="setup-card">
            <h2 data-i18n="collab.setupTitle">Kuro Collaboration</h2>

            <!-- Create -->
            <div class="form-group">
                <label data-i18n="collab.displayName">Your display name</label>
                <input type="text" id="create-name" placeholder="e.g. Alice" />
            </div>
            <div class="form-group">
                <label data-i18n="collab.sessionName">Session name</label>
                <input type="text" id="session-name" placeholder="e.g. Team AI" />
            </div>
            <button class="btn btn-primary" id="btn-create" style="width:100%" data-i18n="collab.createSession">Create Session</button>

            <div class="divider"><span data-i18n="collab.orJoin">or join existing</span></div>

            <div class="form-group">
                <label data-i18n="collab.displayName">Your display name</label>
                <input type="text" id="join-name" placeholder="e.g. Bob" />
            </div>
            <div class="form-group">
                <label data-i18n="collab.inviteCode">Invite code</label>
                <input type="text" id="invite-code" data-i18n-placeholder="collab.invitePlaceholder" placeholder="8-character code" style="font-family:monospace" />
            </div>
            <button class="btn btn-secondary" id="btn-join" style="width:100%" data-i18n="collab.joinSession">Join Session</button>
            <p class="error-msg" id="setup-error"></p>
        </div>
    </div>

    <!-- Header -->
    <nav id="main-nav"></nav>
    <div style="display:flex;align-items:center;gap:0.75rem;padding:0.5rem 1rem;background:var(--bg-header);border-bottom:1px solid var(--border);">
        <span class="invite-badge" id="invite-badge" data-i18n-title="collab.inviteCode" title="Click to copy"></span>
        <span class="copied-hint" id="copied-hint" data-i18n="collab.copied">Copied!</span>
        <span style="font-size:0.8rem;color:var(--text-muted);" id="header-session"></span>
    </div>

    <!-- Main Layout -->
    <main style="flex:1;display:flex;overflow:hidden;">
        <aside class="collab-sidebar">
            <div class="panel-title" data-i18n="collab.participants">Participants</div>
            <div id="participant-list" style="flex:1;overflow-y:auto;padding:0 8px 8px;"></div>
        </aside>

        <div id="chat-area" style="flex:1;display:flex;flex-direction:column;overflow:hidden;">
            <div id="messages" style="flex:1;overflow-y:auto;padding:16px 20px;display:flex;flex-direction:column;gap:12px;"></div>
            <div class="collab-typing" id="typing-indicator"></div>
            <div class="collab-input-area">
                <textarea id="msg-input" rows="1" data-i18n-placeholder="collab.sendPlaceholder" placeholder="Send a message..." disabled></textarea>
                <button id="send-btn-collab" disabled style="background:var(--accent);border:none;border-radius:8px;width:38px;height:38px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" style="fill:var(--bg-primary)"><path d="M2 21l21-9L2 3v7l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </main>

    <script type="module" src="/static/js/collab.js"></script>
</body>
</html>
