<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuro</title>
    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/layout.css">
    <link rel="stylesheet" href="/static/css/components.css">
</head>
<body>
    <nav id="main-nav"></nav>

    <main id="chat-container" style="flex:1;overflow-y:auto;padding:1rem;background:var(--bg-chat);">
        <div id="messages"></div>
    </main>

    <footer id="input-area">
        <div class="input-wrapper">
            <textarea id="user-input" data-i18n-placeholder="chat.placeholder" placeholder="Type a message..." rows="1" autofocus></textarea>
            <button id="btn-send" data-i18n-title="chat.send" title="Send">&#10148;</button>
        </div>
        <div id="connection-status" class="status-bar">
            <span id="status-dot" class="dot dot-disconnected"></span>
            <span id="status-text" data-i18n="chat.connecting">Connecting...</span>
            <span class="status-spacer"></span>
            <span id="model-badge" class="badge badge-model" title="">—</span>
            <span id="trust-badge" class="badge badge-trust">—</span>
        </div>
    </footer>

    <!-- Approval Modal -->
    <div id="approval-modal" class="modal-overlay hidden">
        <div class="modal">
            <h2 data-i18n="approval.title">Tool Approval</h2>
            <div id="approval-tool" class="approval-field"></div>
            <div id="approval-risk" class="approval-field"></div>
            <pre id="approval-params" class="approval-params"></pre>
            <div class="approval-actions">
                <button id="btn-approve" class="btn btn-approve" data-i18n="approval.approve">Approve</button>
                <button id="btn-deny" class="btn btn-deny" data-i18n="approval.deny">Deny</button>
                <button id="btn-trust" class="btn btn-trust" data-i18n="approval.trustSession">Trust Session</button>
            </div>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settings-panel" class="side-panel hidden">
        <div class="panel-header">
            <h2 data-i18n="settings.title">Settings</h2>
            <button class="icon-btn panel-close" data-panel="settings-panel">&times;</button>
        </div>
        <div class="panel-body">
            <label for="model-select" data-i18n="settings.model">Model</label>
            <select id="model-select"></select>

            <label for="trust-select" data-i18n="settings.trustLevel">Trust Level</label>
            <select id="trust-select">
                <option value="low" data-i18n="settings.low">Low</option>
                <option value="medium" data-i18n="settings.medium">Medium</option>
                <option value="high" data-i18n="settings.high">High</option>
            </select>

            <button id="btn-clear" class="btn btn-danger" data-i18n="settings.clearConversation">Clear Conversation</button>

            <label data-i18n="settings.skills">Skills</label>
            <div id="skills-list"></div>
        </div>
    </div>

    <!-- Screen Preview Panel -->
    <div id="screen-panel" class="side-panel screen-panel hidden">
        <div class="panel-header">
            <h2 data-i18n="chat.screenPreview">Screen Preview</h2>
            <span id="screen-step" class="badge">Step 0</span>
            <button class="icon-btn panel-close" data-panel="screen-panel">&times;</button>
        </div>
        <div class="panel-body screen-panel-body">
            <div id="screen-placeholder" class="screen-placeholder" data-i18n="chat.screenPlaceholder">
                No screen capture yet. AI will show the screen here when using computer control.
            </div>
            <img id="screen-image" class="screen-image hidden" alt="Screen preview" />
            <div id="screen-action" class="screen-action-label hidden"></div>
        </div>
    </div>

    <!-- Audit Panel -->
    <div id="audit-panel" class="side-panel hidden">
        <div class="panel-header">
            <h2 data-i18n="chat.auditLog">Audit Log</h2>
            <button class="icon-btn panel-close" data-panel="audit-panel">&times;</button>
        </div>
        <div class="panel-body">
            <button id="btn-refresh-audit" class="btn" data-i18n="chat.refresh">Refresh</button>
            <div id="audit-entries"></div>
        </div>
    </div>

    <script type="module" src="/static/js/chat.js"></script>
</body>
</html>
